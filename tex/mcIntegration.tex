\begin{slide}[toc=Hit-or-miss method]{MC integration (hit-or-miss method)}
\null\vfill

  Lets do the following integration using MC method:
  
  $$\int_0^1 f(x)dx = \int_0^1 \left(\frac{1}{2}x\right) dx = \left.\frac{1}{2}\frac{x^2}{2}\right|_{0}^{1} = \frac{1}{4}$$

  \twocolumn
  {
    \sep
    \begin{itemize}
     \item take a random point from the $[0,1]\times[0,1]$ square
     \item compare it to your $f(x)$
     \item repeat $N$ times
     \item count $n$ points below the function
     \item you results is given by
     $$\int_0^1 f(x)dx = P_{\square} \cdot \frac{n}{N} = \frac{n}{N}$$
    \end{itemize}
  }
  {
    \input{figures/mcExample.tex}
  }
  
\vfill\null
\end{slide}

\begin{emptyslide}{MC integration results}
\null\vfill

  \twocolumn
  {
    
    \includegraphics[width=\columnwidth]{figures/int100.eps}
    \includegraphics[width=\columnwidth]{figures/int1000.eps}
  }
  {
    \includegraphics[width=\columnwidth]{figures/int10000.eps}
    \includegraphics[width=\columnwidth]{figures/int100000.eps}
  }

\vfill\null
\end{emptyslide}


\begin{slide}{Optimization of MC}
\null\vfill

  \twocolumn
  {
    \scalebox{.75}{\input{figures/mcExample.tex}}
  }
  {
    \scalebox{.75}{\input{figures/mcExample2.tex}}
  }

  \begin{itemize}
   \item You want to avoid generating ``red'' points as they do not contribute to your integral
   \item You can choose any rectangle as far as it contains maximum of $f(x)$ in given range
  \end{itemize}

\vfill\null
\end{slide}

\begin{slide}[toc=]{Optimization of MC}
\null\vfill

  \twocolumn
  {
    \begin{itemize}
      \item Lets consider the following function:
  
      $$F(Q^2) = \frac{1}{(1 + Q^2)^2}$$
      {\it\color{pdcolor3} more or less dipole form factor}
      
      \item Integrating this function over $Q^2$ is highly inefficient
      
      \item However, one can integrate by substitution to get better performance, e.g.
      
      $$x = \mbox{log}_{10}(Q^2)$$
      
    \sep{\it\color{pdcolor6}don't forget about Jacobian}

    \end{itemize}

  }
  {
    \input{figures/dipole.tex}
    \vspace{-10pt}
    \input{figures/dipole2.tex}    
  }
    
\vfill\null
\end{slide}

\begin{slide}[toc=Crude method]{MC integration (crude method)}
\null\vfill

  Lets do the following integration using MC method once again:
  
  $$\int_0^1 f(x)dx = \int_0^1 \left(\frac{1}{2}x\right) dx = \left.\frac{1}{2}\frac{x^2}{2}\right|_{0}^{1} = \frac{1}{4}$$
  \twocolumn
  {
    \begin{itemize}
      \item One can approximate integral
      \vspace{-5pt}
      $$\int_a^b f(x) dx \approx \frac{b - a}{N}\sum_{i=1}^{N} f(x_i)$$
     
      where $x_i$ is a random number from $[a, b]$
      
      \item It can be shown that crude method is more accurate than hit-or-miss
      
      \item We will skip the math and look at some comparisons
      
    \end{itemize}
  }
  {
    \input{figures/mcExample3.tex}
  }

\vfill\null
\end{slide}

\begin{emptyslide}{Methods comparison}
\null\vfill

  \twocolumn
  {
    \includegraphics[width=\columnwidth]{figures/int100.eps}
    \includegraphics[width=\columnwidth]{figures/int1000.eps}
  }
  {
    \includegraphics[width=\columnwidth]{figures/int2100.eps}
    \includegraphics[width=\columnwidth]{figures/int21000.eps}
  }

\vfill\null
\end{emptyslide}
